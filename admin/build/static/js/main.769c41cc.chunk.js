(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{36:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),s=a(27),i=a.n(s),o=a(10),l=a(2),j=a(9),d=a.n(j),u=a(12),b=a(8),h=(a(36),a.p+"static/media/logo-dark.301dd4f7.svg"),p=a(28),m=a.n(p).a.create({baseURL:"https://agenciaperform.com.br"});var O=function(){var e=Object(l.f)(),t=Object(c.useState)(""),a=Object(b.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)(""),j=Object(b.a)(i,2),p=j[0],O=j[1],x=Object(c.useState)(!1),v=Object(b.a)(x,2),f=v[0],g=v[1],w=Object(c.useState)(""),N=Object(b.a)(w,2),S=N[0],k=N[1];function y(){return(y=Object(u.a)(d.a.mark((function t(a){var n,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==r&&""!==p){t.next=4;break}return k("Opa, faltou alguma informa\xe7\xe3o!"),t.abrupt("return");case 4:return t.prev=4,t.next=7,m.get("/api/v1/login",{params:{email:r,password:p}});case 7:n=t.sent,t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(4),k("Houve um problema ao comunicar com o servidor, tente mais tarde!"),t.abrupt("return");case 14:if(!n.data.success){t.next=19;break}f?(c=JSON.stringify({email:r,password:n.data.usuario[0].password,validade:7,loginDate:Date.now()}),localStorage.setItem("login",c)):(s=JSON.stringify({email:r,password:n.data.usuario[0].password,validade:1,loginDate:Date.now()}),localStorage.setItem("login",s)),e.push("/admin/contatos"),t.next=21;break;case 19:return k("Usuario ou senha inv\xe1lidos!"),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}return Object(n.jsxs)("div",{id:"login-page",children:[Object(n.jsx)("div",{className:"image-container"}),Object(n.jsxs)("div",{className:"login-form",children:[Object(n.jsx)("img",{src:h,alt:"Perform",width:"270"}),Object(n.jsx)("h1",{children:"Bem vindo novamente"}),Object(n.jsx)("p",{children:"Entre para continuar usando o sistema"}),Object(n.jsxs)("form",{onSubmit:function(e){!function(e){y.apply(this,arguments)}(e)},children:[Object(n.jsxs)("div",{className:"error",children:[S,"Erro"]}),Object(n.jsxs)("div",{className:"input-container",children:[Object(n.jsx)("input",{id:"email",type:"text",value:r,onChange:function(e){s(e.target.value)}}),Object(n.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(n.jsxs)("div",{className:"input-container",children:[Object(n.jsx)("input",{id:"password",type:"password",value:p,onChange:function(e){O(e.target.value)}}),Object(n.jsx)("label",{htmlFor:"password",children:"Senha"})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsxs)("div",{className:"remember",children:[Object(n.jsx)("input",{id:"check",type:"checkbox",value:f,onChange:function(e){g(e.target.value)}}),Object(n.jsx)("label",{htmlFor:"check",children:"Manter conectado"})]}),Object(n.jsx)(o.b,{to:"/admin/login",children:"Esquecceu sua senha?"})]}),Object(n.jsx)("button",{className:"login-btn",type:"submit",children:"Login"})]})]})]})};var x=function(){return Object(n.jsx)("div",{children:"Criar issue"})};a(60);var v=function(){var e=Object(l.f)(),t=Object(c.useState)(!0),a=Object(b.a)(t,2),r=a[0],s=a[1],i=Object(c.useState)([]),j=Object(b.a)(i,2),p=j[0],O=j[1];function x(){return(x=Object(u.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("login")),t.prev=1,t.next=4,m.get("/api/v1/loginValidate",{params:{email:a.email,password:a.password}});case 4:n=t.sent,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(1),alert("Sua sess\xe3o expirou!"),localStorage.clear(),e.push("/admin"),t.abrupt("return");case 13:if(!(a.loginDate-Date.now>864e5*a.validade)){t.next=18;break}return alert("Sua sess\xe3o expirou!"),localStorage.clear(),e.push("/admin"),t.abrupt("return");case 18:return O(n.data),s(!1),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),r?Object(n.jsx)("h1",{children:"Carregando...."}):Object(n.jsxs)("ul",{id:"navbar-component",children:[Object(n.jsx)("li",{className:"navbrand",children:Object(n.jsx)("img",{src:h,alt:"Perform"})}),Object(n.jsx)("li",{children:Object(n.jsxs)("div",{className:"text",children:["Ol\xe1, ",p[0].name]})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.c,{activeClassName:"active",to:"/admin/contatos",exact:!0,children:"Contatos"})}),Object(n.jsx)("li",{children:Object(n.jsx)(o.c,{to:"/admin",exact:!0,children:"Sair"})})]})},f=(a(61),a.p+"static/media/no_data.f5151bd1.svg");var g=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),a=t[0],r=t[1];function s(){return(s=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("/api/v1/contatos");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){s.apply(this,arguments)}()})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v,{}),0===a.length?Object(n.jsx)("div",{id:"contatos-page",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("img",{src:f,alt:"NotFound"}),Object(n.jsx)("h2",{children:"N\xe3o foram registrados nenhum contato at\xe9 o momento"})]})}):Object(n.jsx)("div",{id:"contatos-page",children:Object(n.jsxs)("table",{children:[Object(n.jsxs)("thead",{className:"table-head",children:[Object(n.jsx)("th",{children:"Tipo de Contato"}),Object(n.jsx)("th",{children:"Dados"}),Object(n.jsx)("th",{children:"Data do contato"}),Object(n.jsx)("th",{children:"Retorno do contato"})]}),Object(n.jsx)("tbody",{children:a.map((function(e,t){return Object(n.jsxs)("tr",{className:"table-row",children:[Object(n.jsx)("td",{children:e.tipoContato}),Object(n.jsxs)("td",{className:"data",children:[Object(n.jsx)("p",{children:e.nome}),Object(n.jsxs)("div",{className:"row-data",children:[Object(n.jsx)("p",{children:e.email}),Object(n.jsx)("p",{children:e.celular})]}),Object(n.jsx)("div",{className:"row-data",children:Object(n.jsx)("p",{children:e.mensagem})})]}),Object(n.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),Object(n.jsx)("td",{children:e.feitoContato?Object(n.jsx)("div",{className:"boolean-data-true"}):Object(n.jsx)("div",{className:"boolean-data-false"})})]},"index")}))})]})})]})};var w=function(){return Object(n.jsx)(o.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/admin",exact:!0,component:O}),Object(n.jsx)(l.a,{path:"/admin/contatos",exact:!0,component:g}),Object(n.jsx)(l.a,{path:"/admin/create-issue",exact:!0,component:x})]})})};a(62);var N=function(){return Object(n.jsx)(w,{})};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.769c41cc.chunk.js.map